<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Dr.&nbsp;Kam Tin Seong Assoc. Professor of Information Systems">
<meta name="dcterms.date" content="2023-01-08">

<title>ISSS608 - Building Web-enabled Visual Analytics Application with Shiny: Beyond the basic</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">


<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">ISSS608</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../syllabus.html">
 <span class="menu-text">Syllabus</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../lesson.html">
 <span class="menu-text">Lesson Plan</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../DataViz.html">
 <span class="menu-text">DataViz Makeover</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../take-home.html">
 <span class="menu-text">Take-home Exercise</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../VAproject.html">
 <span class="menu-text">Visual Analytics Project</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-shiny-workshop" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Shiny Workshop</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-shiny-workshop">    
        <li>
    <a class="dropdown-item" href="../../ShinyWorkshop/Shiny1/Shiny1.html">
 <span class="dropdown-text">R Shiny basic</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../ShinyWorkshop/Shiny2/Shiny0.html">
 <span class="dropdown-text">Beyond the basic</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../ShinyWorkshop/Shiny3/Shiny0.html">
 <span class="dropdown-text">Customising Shiny</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../ShinyResources.html">
 <span class="dropdown-text">Shiny Resources</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="../../Tableau.html">
 <span class="menu-text">Tableau Resources</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-all-about-r" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">All About R</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-all-about-r">    
        <li>
    <a class="dropdown-item" href="../../R.html">
 <span class="dropdown-text">R Resouces</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Rt.html">
 <span class="dropdown-text">R tips &amp; tricks</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Quarto.html">
 <span class="dropdown-text">Quarto</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../git.html">
 <span class="dropdown-text">git and github</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="../../index.html">
 <span class="menu-text">Home</span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#overview" id="toc-overview" class="nav-link active" data-scroll-target="#overview">Overview</a></li>
  <li><a href="#reactive-flow" id="toc-reactive-flow" class="nav-link" data-scroll-target="#reactive-flow">Reactive Flow</a>
  <ul class="collapse">
  <li><a href="#reactive-flow---the-basic" id="toc-reactive-flow---the-basic" class="nav-link" data-scroll-target="#reactive-flow---the-basic">Reactive Flow - the basic</a></li>
  <li><a href="#reactive-flow---the-full-features" id="toc-reactive-flow---the-full-features" class="nav-link" data-scroll-target="#reactive-flow---the-full-features">Reactive Flow - The full features</a></li>
  <li><a href="#reactive-elements" id="toc-reactive-elements" class="nav-link" data-scroll-target="#reactive-elements">Reactive elements</a></li>
  <li><a href="#reactive-elements-1" id="toc-reactive-elements-1" class="nav-link" data-scroll-target="#reactive-elements-1">Reactive elements</a></li>
  </ul></li>
  <li><a href="#in-class-exercise-building-a-reactive-scatter-plot-using-shiny" id="toc-in-class-exercise-building-a-reactive-scatter-plot-using-shiny" class="nav-link" data-scroll-target="#in-class-exercise-building-a-reactive-scatter-plot-using-shiny">In-class Exercise: Building a reactive scatter plot using Shiny</a>
  <ul class="collapse">
  <li><a href="#the-ui" id="toc-the-ui" class="nav-link" data-scroll-target="#the-ui">The UI</a></li>
  <li><a href="#the-server" id="toc-the-server" class="nav-link" data-scroll-target="#the-server">The server</a></li>
  <li><a href="#stop-trigger-delay" id="toc-stop-trigger-delay" class="nav-link" data-scroll-target="#stop-trigger-delay">Stop-trigger-delay</a></li>
  <li><a href="#working-with-submitbutton" id="toc-working-with-submitbutton" class="nav-link" data-scroll-target="#working-with-submitbutton">Working with <code>submitButton()</code></a></li>
  <li><a href="#working-with-submitbutton-1" id="toc-working-with-submitbutton-1" class="nav-link" data-scroll-target="#working-with-submitbutton-1">Working with <code>submitButton()</code></a></li>
  <li><a href="#isolating-reactions" id="toc-isolating-reactions" class="nav-link" data-scroll-target="#isolating-reactions">Isolating reactions</a></li>
  <li><a href="#working-with-isolate-and-actionbutton" id="toc-working-with-isolate-and-actionbutton" class="nav-link" data-scroll-target="#working-with-isolate-and-actionbutton">Working with <code>isolate()</code> and <code>actionButton()</code></a></li>
  <li><a href="#working-with-isolate-and-actionbutton-1" id="toc-working-with-isolate-and-actionbutton-1" class="nav-link" data-scroll-target="#working-with-isolate-and-actionbutton-1">Working with <code>isolate()</code> and <code>actionButton()</code></a></li>
  </ul></li>
  <li><a href="#embedding-interactive-graphs-in-r-shiny" id="toc-embedding-interactive-graphs-in-r-shiny" class="nav-link" data-scroll-target="#embedding-interactive-graphs-in-r-shiny">Embedding Interactive Graphs in R Shiny</a>
  <ul class="collapse">
  <li><a href="#the-plotly-way" id="toc-the-plotly-way" class="nav-link" data-scroll-target="#the-plotly-way">The <strong>plotly</strong> way</a></li>
  <li><a href="#in-class-exercise-embedding-an-interactive-scatter-plot-in-shiny" id="toc-in-class-exercise-embedding-an-interactive-scatter-plot-in-shiny" class="nav-link" data-scroll-target="#in-class-exercise-embedding-an-interactive-scatter-plot-in-shiny">In-class Exercise: Embedding an interactive scatter plot in Shiny</a></li>
  <li><a href="#in-class-exercise-embedding-an-interactive-bar-chart-in-shiny" id="toc-in-class-exercise-embedding-an-interactive-bar-chart-in-shiny" class="nav-link" data-scroll-target="#in-class-exercise-embedding-an-interactive-bar-chart-in-shiny">In-class Exercise: Embedding an interactive bar chart in Shiny</a></li>
  <li><a href="#in-class-exercise-embedding-an-interactive-bar-chart-in-shiny-1" id="toc-in-class-exercise-embedding-an-interactive-bar-chart-in-shiny-1" class="nav-link" data-scroll-target="#in-class-exercise-embedding-an-interactive-bar-chart-in-shiny-1">In-class Exercise: Embedding an interactive bar chart in Shiny</a></li>
  </ul></li>
  <li><a href="#in-class-exercise-embedding-a-drill-down-bar-chart-in-shiny" id="toc-in-class-exercise-embedding-a-drill-down-bar-chart-in-shiny" class="nav-link" data-scroll-target="#in-class-exercise-embedding-a-drill-down-bar-chart-in-shiny">In-class Exercise: Embedding a drill-down bar chart in Shiny</a>
  <ul class="collapse">
  <li><a href="#in-class-exercise-embedding-a-drill-down-bar-chart-in-shiny-1" id="toc-in-class-exercise-embedding-a-drill-down-bar-chart-in-shiny-1" class="nav-link" data-scroll-target="#in-class-exercise-embedding-a-drill-down-bar-chart-in-shiny-1">In-class Exercise: Embedding a drill-down bar chart in Shiny</a></li>
  <li><a href="#in-class-exercise-embedding-a-drill-down-bar-chart-in-shiny-revised-version" id="toc-in-class-exercise-embedding-a-drill-down-bar-chart-in-shiny-revised-version" class="nav-link" data-scroll-target="#in-class-exercise-embedding-a-drill-down-bar-chart-in-shiny-revised-version">In-class Exercise: Embedding a drill-down bar chart in Shiny (Revised version)</a></li>
  </ul></li>
  <li><a href="#in-class-exercise-embedding-a-static-map-in-shiny" id="toc-in-class-exercise-embedding-a-static-map-in-shiny" class="nav-link" data-scroll-target="#in-class-exercise-embedding-a-static-map-in-shiny">In-class Exercise: Embedding A Static Map in Shiny</a>
  <ul class="collapse">
  <li><a href="#in-class-exercise-embedding-a-static-map-in-shiny-1" id="toc-in-class-exercise-embedding-a-static-map-in-shiny-1" class="nav-link" data-scroll-target="#in-class-exercise-embedding-a-static-map-in-shiny-1">In-class Exercise: Embedding A Static Map in Shiny</a></li>
  <li><a href="#in-class-exercise-embedding-a-static-map-in-shiny-2" id="toc-in-class-exercise-embedding-a-static-map-in-shiny-2" class="nav-link" data-scroll-target="#in-class-exercise-embedding-a-static-map-in-shiny-2">In-class Exercise: Embedding a static map in Shiny</a></li>
  <li><a href="#in-class-exercise-embedding-a-static-map-in-shiny-3" id="toc-in-class-exercise-embedding-a-static-map-in-shiny-3" class="nav-link" data-scroll-target="#in-class-exercise-embedding-a-static-map-in-shiny-3">In-class Exercise: Embedding a static map in Shiny</a></li>
  </ul></li>
  <li><a href="#in-class-exercise-building-a-choropleth-mapping-application" id="toc-in-class-exercise-building-a-choropleth-mapping-application" class="nav-link" data-scroll-target="#in-class-exercise-building-a-choropleth-mapping-application">In-class Exercise: Building a choropleth mapping application</a>
  <ul class="collapse">
  <li><a href="#in-class-exercise-building-a-choropleth-mapping-application-1" id="toc-in-class-exercise-building-a-choropleth-mapping-application-1" class="nav-link" data-scroll-target="#in-class-exercise-building-a-choropleth-mapping-application-1">In-class Exercise: Building a choropleth mapping application</a></li>
  <li><a href="#in-class-exercise-building-a-choropleth-mapping-application-2" id="toc-in-class-exercise-building-a-choropleth-mapping-application-2" class="nav-link" data-scroll-target="#in-class-exercise-building-a-choropleth-mapping-application-2">In-class Exercise: Building a choropleth mapping application</a></li>
  <li><a href="#in-class-exercise-building-a-choropleth-mapping-application-3" id="toc-in-class-exercise-building-a-choropleth-mapping-application-3" class="nav-link" data-scroll-target="#in-class-exercise-building-a-choropleth-mapping-application-3">In-class Exercise: Building a choropleth mapping application</a></li>
  <li><a href="#in-class-exercise-building-a-choropleth-mapping-application-4" id="toc-in-class-exercise-building-a-choropleth-mapping-application-4" class="nav-link" data-scroll-target="#in-class-exercise-building-a-choropleth-mapping-application-4">In-class Exercise: Building a choropleth mapping application</a></li>
  <li><a href="#in-class-exercise-building-a-choropleth-mapping-application-5" id="toc-in-class-exercise-building-a-choropleth-mapping-application-5" class="nav-link" data-scroll-target="#in-class-exercise-building-a-choropleth-mapping-application-5">In-class Exercise: Building a choropleth mapping application</a></li>
  </ul></li>
  <li><a href="#embedding-an-interactive-map-in-shiny" id="toc-embedding-an-interactive-map-in-shiny" class="nav-link" data-scroll-target="#embedding-an-interactive-map-in-shiny">Embedding an interactive map in Shiny</a>
  <ul class="collapse">
  <li><a href="#setting-up-1" id="toc-setting-up-1" class="nav-link" data-scroll-target="#setting-up-1">Setting up</a></li>
  <li><a href="#importing-the-geospatial-data-1" id="toc-importing-the-geospatial-data-1" class="nav-link" data-scroll-target="#importing-the-geospatial-data-1">Importing the geospatial data</a></li>
  <li><a href="#things-to-learn-from-the-code-chunk-above" id="toc-things-to-learn-from-the-code-chunk-above" class="nav-link" data-scroll-target="#things-to-learn-from-the-code-chunk-above">Things to learn from the code chunk above:</a></li>
  <li><a href="#the-ui-1" id="toc-the-ui-1" class="nav-link" data-scroll-target="#the-ui-1">The ui</a></li>
  <li><a href="#the-server-1" id="toc-the-server-1" class="nav-link" data-scroll-target="#the-server-1">The server</a></li>
  </ul></li>
  <li><a href="#in-class-exercise-reactive-map-in-r-shiny" id="toc-in-class-exercise-reactive-map-in-r-shiny" class="nav-link" data-scroll-target="#in-class-exercise-reactive-map-in-r-shiny">In-class Exercise: Reactive Map in R Shiny</a>
  <ul class="collapse">
  <li><a href="#the-ui-2" id="toc-the-ui-2" class="nav-link" data-scroll-target="#the-ui-2">The ui</a></li>
  <li><a href="#the-ui-continue" id="toc-the-ui-continue" class="nav-link" data-scroll-target="#the-ui-continue">The ui (continue)</a></li>
  <li><a href="#the-server-2" id="toc-the-server-2" class="nav-link" data-scroll-target="#the-server-2">The server</a></li>
  <li><a href="#the-server-continue" id="toc-the-server-continue" class="nav-link" data-scroll-target="#the-server-continue">The server (continue)</a></li>
  </ul></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Building Web-enabled Visual Analytics Application with Shiny: Beyond the basic</h1>
</div>


<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Author</div>
  <div class="quarto-title-meta-heading">Affiliation</div>
  
    <div class="quarto-title-meta-contents">
    Dr.&nbsp;Kam Tin Seong<br>Assoc. Professor of Information Systems 
  </div>
    <div class="quarto-title-meta-contents">
        <p class="affiliation">
            School of Computing and Information Systems,<br>Singapore Management University
          </p>
      </div>
    </div>

<div class="quarto-title-meta">

      
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">08 Jan 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="overview" class="level2">
<h2 class="anchored" data-anchor-id="overview">Overview</h2>
<p>In this lesson, selected advanced methods of Shiny will be discussed. You will also gain hands-on experiences on using these advanced methods to build Shiny applications.</p>
<p>By the end of this lesson, you will be able to:</p>
<ul>
<li>gain further understanding of the reactive feature of Shiny and Shiny’s functions that support reactive flow,</li>
<li>build interactive Shiny application by using plotly R and</li>
<li>build static, interactive and reactive geovisualisation application by using tmap</li>
</ul>
</section>
<section id="reactive-flow" class="level2">
<h2 class="anchored" data-anchor-id="reactive-flow">Reactive Flow</h2>
<p>By default, Shiny application is <strong>Reactive</strong>!</p>
<p><img src="img/image12.jpg" class="img-fluid"></p>
<hr>
<section id="reactive-flow---the-basic" class="level3">
<h3 class="anchored" data-anchor-id="reactive-flow---the-basic">Reactive Flow - the basic</h3>
<p>The user selects an input, this input goes through some expression in the server, and an output is rendered. Each time the user changes their input selection, the expression that generates the output will automatically re-execute, and the relevant output will be re-rendered based on the new value of the input.</p>
<p>In a Shiny application, there’s no need to explictly describe the relationships between inputs and outputs and tell R what to do when each input changes, Shiny automatically handles these details for you.</p>
<p><img src="img/image11.jpg" class="img-fluid"></p>
<div style="font-size: 0.75em">
<p>Source: <a href="https://minecr.shinyapps.io/02-flow/#section-reactive-flow">Module 2</a> of <a href="https://rstudio-education.github.io/shiny-course/">Building Web Applications with Shiny</a></p>
</div>
<hr>
</section>
<section id="reactive-flow---the-full-features" class="level3">
<h3 class="anchored" data-anchor-id="reactive-flow---the-full-features">Reactive Flow - The full features</h3>
<p><img src="img/image1.jpg" class="img-fluid"></p>
<hr>
</section>
<section id="reactive-elements" class="level3">
<h3 class="anchored" data-anchor-id="reactive-elements">Reactive elements</h3>
<div class="columns">
<div class="column" style="width:60%;">
<p>Three components of reactive execution in Shiny are:</p>
<ul>
<li>reactive inputs,</li>
<li>reactive expressions, and</li>
<li>reactive outputs.</li>
</ul>
<p><img src="img/image13.jpg" class="img-fluid"></p>
</div>
</div>
<hr>
</section>
<section id="reactive-elements-1" class="level3">
<h3 class="anchored" data-anchor-id="reactive-elements-1">Reactive elements</h3>
<div style="font-size: 0.85em">
<div class="columns">
<div class="column" style="width:50%;">
<section id="reactive-inputs-and-outputs" class="level4">
<h4 class="anchored" data-anchor-id="reactive-inputs-and-outputs">Reactive inputs and outputs</h4>
<ul>
<li>A <strong>reactive input</strong> is a user input that comes through a browser interface, typically.</li>
<li>A <strong>reactive output</strong> is something that appears in the user’s browser window, such as a plot or a table of values.</li>
</ul>
<p><img src="img/image14.jpg" class="img-fluid"></p>
<ul>
<li>One reactive input can be connected to multiple outputs, and vice versa. For example we might have a UI input widget for filtering out data based on user’s selection, and the filtered data can be used in multiple outputs like plots and summaries.</li>
</ul>
</section>
</div><div class="column" style="width:50%;">
<section id="reactive-expressions" class="level4">
<h4 class="anchored" data-anchor-id="reactive-expressions">Reactive expressions</h4>
<ul>
<li><p>A <strong>reactive expressions</strong> is component between an input and an output.</p></li>
<li><p>It can both be a dependent (i.e be a child) and have dependents (i.e.&nbsp;be a parent).</p></li>
</ul>
<p><img src="img/image15.jpg" class="img-fluid"></p>
</section>
</div>
</div>
</div>
</section>
</section>
<section id="in-class-exercise-building-a-reactive-scatter-plot-using-shiny" class="level2">
<h2 class="anchored" data-anchor-id="in-class-exercise-building-a-reactive-scatter-plot-using-shiny">In-class Exercise: Building a reactive scatter plot using Shiny</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p>In this in-class exercise, you are going to explore advanced reactive features.</p>
<p>To get started, you need to do the followings:</p>
<ul>
<li>start a new Shiny Application</li>
<li>load the necessary R package, namely Shiny and tidyverse</li>
<li>import the data file (i.e.&nbsp;Exam_data.csv )</li>
<li>build a basic scatterplot look similar to the figure on the right.</li>
</ul>
</div><div class="column" style="width:50%;">
<p><img src="img/image16.jpg" class="img-fluid"></p>
</div>
</div>
<hr>
<section id="the-ui" class="level3">
<h3 class="anchored" data-anchor-id="the-ui">The UI</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>exam <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/Exam_data.csv"</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">titlePanel</span>(<span class="st">"Subject Correlation Analysis"</span>),</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sidebarLayout</span>(</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>        <span class="fu">sidebarPanel</span>(</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>            <span class="fu">selectInput</span>(<span class="at">inputId =</span> <span class="st">"yvariable"</span>,</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>                        <span class="at">label =</span> <span class="st">"y Variable:"</span>,</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>                        <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">"English"</span> <span class="ot">=</span> <span class="st">"ENGLISH"</span>,</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>                                    <span class="st">"Maths"</span> <span class="ot">=</span> <span class="st">"MATHS"</span>,</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>                                    <span class="st">"Science"</span> <span class="ot">=</span> <span class="st">"SCIENCE"</span>),</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>                        <span class="at">selected =</span> <span class="st">"MATHS"</span>),</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>            <span class="fu">selectInput</span>(<span class="at">inputId =</span> <span class="st">"xvariable"</span>,</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>                        <span class="at">label =</span> <span class="st">"x Variable:"</span>,</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>                        <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">"English"</span> <span class="ot">=</span> <span class="st">"ENGLISH"</span>,</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>                                    <span class="st">"Maths"</span> <span class="ot">=</span> <span class="st">"MATHS"</span>,</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>                                    <span class="st">"Science"</span> <span class="ot">=</span> <span class="st">"SCIENCE"</span>),</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>                        <span class="at">selected =</span> <span class="st">"SCIENCE"</span>)</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>        <span class="fu">mainPanel</span>(</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>            <span class="fu">plotOutput</span>(<span class="st">"scatterPlot"</span>)</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
</section>
<section id="the-server" class="level3">
<h3 class="anchored" data-anchor-id="the-server">The server</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session){    </span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    output<span class="sc">$</span>scatterPlot <span class="ot">&lt;-</span> <span class="fu">renderPlot</span>({</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">ggplot</span>(<span class="at">data=</span>exam,</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>               <span class="fu">aes_string</span>(<span class="at">x =</span> input<span class="sc">$</span>xvariable,      </span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>                          <span class="at">y =</span> input<span class="sc">$</span>yvariable)) <span class="sc">+</span>   </span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>                   <span class="fu">geom_point</span>()</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Lastly, do not forget to add this line!</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyApp</span> (<span class="at">ui=</span>ui, <span class="at">server=</span>server)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
</section>
<section id="stop-trigger-delay" class="level3">
<h3 class="anchored" data-anchor-id="stop-trigger-delay">Stop-trigger-delay</h3>
<p>In this section, you will learn how to how to stop, trigger, and delay Shiny actions.</p>
<ul>
<li>Using <code>submitButton()</code></li>
<li>Using <code>isolate()</code> and <code>actionButton()</code></li>
</ul>
<hr>
</section>
<section id="working-with-submitbutton" class="level3">
<h3 class="anchored" data-anchor-id="working-with-submitbutton">Working with <code>submitButton()</code></h3>
<p><img src="img/image17.jpg" class="img-fluid"></p>
<hr>
</section>
<section id="working-with-submitbutton-1" class="level3">
<h3 class="anchored" data-anchor-id="working-with-submitbutton-1">Working with <code>submitButton()</code></h3>
<ul>
<li><p><code>submitButton()</code> is used when you want to delay a reaction.</p></li>
<li><p>Edit the code as shown below:</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a>            <span class="fu">selectInput</span>(<span class="at">inputId =</span> <span class="st">"xvariable"</span>,</span>
<span id="cb4-2"><a href="#cb4-2"></a>                        <span class="at">label =</span> <span class="st">"x Variable:"</span>,</span>
<span id="cb4-3"><a href="#cb4-3"></a>                        <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">"English"</span> <span class="ot">=</span> <span class="st">"ENGLISH"</span>,</span>
<span id="cb4-4"><a href="#cb4-4"></a>                                    <span class="st">"Maths"</span> <span class="ot">=</span> <span class="st">"MATHS"</span>,</span>
<span id="cb4-5"><a href="#cb4-5"></a>                                    <span class="st">"Science"</span> <span class="ot">=</span> <span class="st">"SCIENCE"</span>),</span>
<span id="cb4-6"><a href="#cb4-6"></a>                        <span class="at">selected =</span> <span class="st">"SCIENCE"</span>),</span>
<span id="cb4-7"><a href="#cb4-7"></a>            <span class="fu">submitButton</span>(<span class="st">"Apply changes"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Note: The use of <code>submitButton()</code> is generally discouraged in favor of the more versatile <code>actionButton()</code>.</p>
<p>Reference: <a href="https://shiny.rstudio.com/reference/shiny/latest/submitButton.html">submitButton</a>.</p>
<hr>
</section>
<section id="isolating-reactions" class="level3">
<h3 class="anchored" data-anchor-id="isolating-reactions">Isolating reactions</h3>
<section id="when-to-use" class="level4">
<h4 class="anchored" data-anchor-id="when-to-use">When to use?</h4>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li>Suppose your app has an input widget where users can enter text for the title of the plot. However you only want the title to update if any of the other inputs that go into the plot change. You can achieve this by isolating the plot title such that:
<ul>
<li>When input<span class="math inline">\(x or input\)</span>y changes, the plot will update.</li>
<li>But when only the title input (input$plot_title) changes, the plot will not update.</li>
</ul></li>
</ul>
</div><div class="column" style="width:50%;">
<p><img src="img/image19.jpg" class="img-fluid"></p>
</div>
</div>
<p>Reference: <a href="https://shiny.rstudio.com/articles/isolation.html">isolation</a></p>
<hr>
</section>
</section>
<section id="working-with-isolate-and-actionbutton" class="level3">
<h3 class="anchored" data-anchor-id="working-with-isolate-and-actionbutton">Working with <code>isolate()</code> and <code>actionButton()</code></h3>
<ul>
<li>At the ui, edit the code as shown below:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>            <span class="fu">selectInput</span>(<span class="at">inputId =</span> <span class="st">"xvariable"</span>,</span>
<span id="cb5-2"><a href="#cb5-2"></a>                        <span class="at">label =</span> <span class="st">"x Variable:"</span>,</span>
<span id="cb5-3"><a href="#cb5-3"></a>                        <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">"English"</span> <span class="ot">=</span> <span class="st">"ENGLISH"</span>,</span>
<span id="cb5-4"><a href="#cb5-4"></a>                                    <span class="st">"Maths"</span> <span class="ot">=</span> <span class="st">"MATHS"</span>,</span>
<span id="cb5-5"><a href="#cb5-5"></a>                                    <span class="st">"Science"</span> <span class="ot">=</span> <span class="st">"SCIENCE"</span>),</span>
<span id="cb5-6"><a href="#cb5-6"></a>                        <span class="at">selected =</span> <span class="st">"SCIENCE"</span>),</span>
<span id="cb5-7"><a href="#cb5-7"></a>            <span class="fu">textInput</span>(                       </span>
<span id="cb5-8"><a href="#cb5-8"></a>                <span class="at">inputId =</span> <span class="st">"plot_title"</span>,     </span>
<span id="cb5-9"><a href="#cb5-9"></a>                <span class="at">label =</span> <span class="st">"Plot title"</span>,       </span>
<span id="cb5-10"><a href="#cb5-10"></a>                <span class="at">placeholder =</span> <span class="st">"Enter text to be used as plot title"</span>), </span>
<span id="cb5-11"><a href="#cb5-11"></a>            <span class="fu">actionButton</span>(<span class="st">"goButton"</span>, <span class="st">"Go!"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Reference guide on <a href="https://shiny.rstudio.com/reference/shiny/1.6.0/textInput.html"><code>textInput()</code></a></li>
<li>Reference guide on <a href="https://shiny.rstudio.com/reference/shiny/1.6.0/actionButton.html"><code>actionButton()</code></a></li>
</ul>
<hr>
</section>
<section id="working-with-isolate-and-actionbutton-1" class="level3">
<h3 class="anchored" data-anchor-id="working-with-isolate-and-actionbutton-1">Working with <code>isolate()</code> and <code>actionButton()</code></h3>
<ul>
<li>At the server side, edit the codes as shown below:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session){</span>
<span id="cb6-2"><a href="#cb6-2"></a>    output<span class="sc">$</span>scatterPlot <span class="ot">&lt;-</span> <span class="fu">renderPlot</span>({</span>
<span id="cb6-3"><a href="#cb6-3"></a>        input<span class="sc">$</span>goButton                           </span>
<span id="cb6-4"><a href="#cb6-4"></a>        </span>
<span id="cb6-5"><a href="#cb6-5"></a>        <span class="fu">ggplot</span>(<span class="at">data=</span>exam,</span>
<span id="cb6-6"><a href="#cb6-6"></a>               <span class="fu">aes_string</span>(<span class="at">x =</span> input<span class="sc">$</span>xvariable,</span>
<span id="cb6-7"><a href="#cb6-7"></a>                          <span class="at">y =</span> input<span class="sc">$</span>yvariable)) <span class="sc">+</span></span>
<span id="cb6-8"><a href="#cb6-8"></a>            <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb6-9"><a href="#cb6-9"></a>            <span class="fu">labs</span>(<span class="at">title =</span> <span class="fu">isolate</span>({               </span>
<span id="cb6-10"><a href="#cb6-10"></a>                <span class="fu">toTitleCase</span>(input<span class="sc">$</span>plot_title)    </span>
<span id="cb6-11"><a href="#cb6-11"></a>            }))                                  </span>
<span id="cb6-12"><a href="#cb6-12"></a>    })</span>
<span id="cb6-13"><a href="#cb6-13"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Reference guide on <a href="https://shiny.rstudio.com/reference/shiny/1.6.0/isolate.html"><code>isolate()</code></a></li>
</ul>
</section>
</section>
<section id="embedding-interactive-graphs-in-r-shiny" class="level2">
<h2 class="anchored" data-anchor-id="embedding-interactive-graphs-in-r-shiny">Embedding Interactive Graphs in R Shiny</h2>
<section id="the-plotly-way" class="level3">
<h3 class="anchored" data-anchor-id="the-plotly-way">The <strong>plotly</strong> way</h3>
<div class="columns">
<div class="column" style="width:50%;">
<p>Two approaches: - Using plotly directly, or - Plot the basic visualisation using <strong>ggplot2</strong>, then wrap the visualisation object into plotly object using <code>ggplotly()</code>.</p>
<p>Reference: - <a href="https://plotly.com/r/">Plotly R Open Source Graphing Library</a> - <a href="https://plotly-r.com/linking-views-with-shiny.html">17 Server-side linking with shiny</a> of <a href="https://plotly-r.com/index.html">Interactive web-based data visualization with R, plotly, and shiny</a></p>
</div><div class="column" style="width:50%;">
<p><img src="img/image20.jpg" class="img-fluid"></p>
</div>
</div>
<hr>
</section>
<section id="in-class-exercise-embedding-an-interactive-scatter-plot-in-shiny" class="level3">
<h3 class="anchored" data-anchor-id="in-class-exercise-embedding-an-interactive-scatter-plot-in-shiny">In-class Exercise: Embedding an interactive scatter plot in Shiny</h3>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li>Install plotly R package if it has yet to be install in RStudio.</li>
<li>include a new line as shown below to launch plotly library.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb7-2"><a href="#cb7-2"></a><span class="fu">library</span>(plotly) </span>
<span id="cb7-3"><a href="#cb7-3"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>At UI, edit the code as shown below</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a> <span class="fu">mainPanel</span>(</span>
<span id="cb8-2"><a href="#cb8-2"></a>    <span class="fu">plotlyOutput</span>(<span class="st">"scatterPlot"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<ul>
<li>edit the server section of the Shiny app as shown below.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output){</span>
<span id="cb9-2"><a href="#cb9-2"></a>    output<span class="sc">$</span>scatterPlot <span class="ot">&lt;-</span> <span class="fu">renderPlotly</span>({ <span class="co">#&lt;&lt;</span></span>
<span id="cb9-3"><a href="#cb9-3"></a>        </span>
<span id="cb9-4"><a href="#cb9-4"></a>      p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> exam, </span>
<span id="cb9-5"><a href="#cb9-5"></a>            <span class="fu">aes_string</span>(<span class="at">x =</span> input<span class="sc">$</span>xvariable,</span>
<span id="cb9-6"><a href="#cb9-6"></a>                       <span class="at">y =</span> input<span class="sc">$</span>yvariable)) <span class="sc">+</span></span>
<span id="cb9-7"><a href="#cb9-7"></a>            <span class="fu">geom_point</span>(<span class="at">color=</span><span class="st">"grey 10"</span>, </span>
<span id="cb9-8"><a href="#cb9-8"></a>                       <span class="at">size=</span><span class="dv">1</span>)</span>
<span id="cb9-9"><a href="#cb9-9"></a>        </span>
<span id="cb9-10"><a href="#cb9-10"></a>            <span class="fu">ggplotly</span>(p) <span class="co">#&lt;&lt;                           </span></span>
<span id="cb9-11"><a href="#cb9-11"></a>    })</span>
<span id="cb9-12"><a href="#cb9-12"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<hr>
</section>
<section id="in-class-exercise-embedding-an-interactive-bar-chart-in-shiny" class="level3">
<h3 class="anchored" data-anchor-id="in-class-exercise-embedding-an-interactive-bar-chart-in-shiny">In-class Exercise: Embedding an interactive bar chart in Shiny</h3>
<p>In this exercise, you will learn how going to embed an interactive bar chart in Shiny by using plotly. The output will look similar to the figure below.</p>
<p><img src="img/image21.jpg" class="img-fluid"></p>
<hr>
</section>
<section id="in-class-exercise-embedding-an-interactive-bar-chart-in-shiny-1" class="level3">
<h3 class="anchored" data-anchor-id="in-class-exercise-embedding-an-interactive-bar-chart-in-shiny-1">In-class Exercise: Embedding an interactive bar chart in Shiny</h3>
<div class="columns">
<div class="column" style="width:50%;">
<p>The ui:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plotly)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>exam <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/Exam_data.csv"</span>)</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">titlePanel</span>(<span class="st">"Pupils Profile"</span>),</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mainPanel</span>(</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>            <span class="fu">plotlyOutput</span>(<span class="st">"race"</span>),</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<p>The server:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output) {</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>    output<span class="sc">$</span>race <span class="ot">&lt;-</span> <span class="fu">renderPlotly</span>({</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>        p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data=</span>exam, </span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">aes</span>(<span class="at">x=</span>RACE)) <span class="sc">+</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>            <span class="fu">geom_bar</span>()</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>        <span class="fu">ggplotly</span>(p)</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Last but not least the app</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyApp</span> (<span class="at">ui=</span>ui, <span class="at">server=</span>server)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="in-class-exercise-embedding-a-drill-down-bar-chart-in-shiny" class="level2">
<h2 class="anchored" data-anchor-id="in-class-exercise-embedding-a-drill-down-bar-chart-in-shiny">In-class Exercise: Embedding a drill-down bar chart in Shiny</h2>
<p>In this exercise, you will learn how to embed a drill-down bar chart in Shiny by using <a href="https://search.r-project.org/CRAN/refmans/plotly/html/event_data.html"><code>event_data()</code></a> of plotly.</p>
<p><img src="img/image22.jpg" class="img-fluid"></p>
<hr>
<section id="in-class-exercise-embedding-a-drill-down-bar-chart-in-shiny-1" class="level3">
<h3 class="anchored" data-anchor-id="in-class-exercise-embedding-a-drill-down-bar-chart-in-shiny-1">In-class Exercise: Embedding a drill-down bar chart in Shiny</h3>
<div class="columns">
<div class="column" style="width:50%;">
<p>The ui:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plotly)</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>exam <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/Exam_data.csv"</span>)</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">titlePanel</span>(<span class="st">"Drill-down Bar Chart"</span>),</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mainPanel</span>(</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>            <span class="fu">plotlyOutput</span>(<span class="st">"race"</span>),</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>            <span class="fu">plotlyOutput</span>(<span class="st">"gender"</span>),</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>            <span class="fu">verbatimTextOutput</span>(<span class="st">"info"</span>)</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Visit this <a href="https://www.marsja.se/how-to-use-in-in-r/">link</a> to learn more about %in%.</p>
</div><div class="column" style="width:50%;">
<p>The server:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output) {</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>    output<span class="sc">$</span>race <span class="ot">&lt;-</span> <span class="fu">renderPlotly</span>({</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>        p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data=</span>exam, </span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">aes</span>(<span class="at">x=</span>RACE)) <span class="sc">+</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>            <span class="fu">geom_bar</span>()</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>        <span class="fu">ggplotly</span>(p)</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>    output<span class="sc">$</span>gender <span class="ot">&lt;-</span> <span class="fu">renderPlotly</span>({</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>        d <span class="ot">&lt;-</span> <span class="fu">event_data</span>(<span class="st">"plotly_click"</span>) <span class="co">#&lt;&lt;</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (<span class="fu">is.null</span>(d)) <span class="fu">return</span>(<span class="cn">NULL</span>) <span class="co">#&lt;&lt;</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>        p <span class="ot">&lt;-</span> exam <span class="sc">%&gt;%</span> </span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>            <span class="fu">filter</span>(RACE <span class="sc">%in%</span> d<span class="sc">$</span>x) <span class="sc">%&gt;%</span>  <span class="co">#&lt;&lt;</span></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>            <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>GENDER)) <span class="sc">+</span></span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>            <span class="fu">geom_bar</span>() </span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>        <span class="fu">ggplotly</span>(p) <span class="sc">%&gt;%</span></span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>            <span class="fu">layout</span>(<span class="at">xaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> d<span class="sc">$</span>x)) <span class="co">#&lt;&lt;</span></span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>    output<span class="sc">$</span>info <span class="ot">&lt;-</span> <span class="fu">renderPrint</span>({</span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>        <span class="fu">event_data</span>(<span class="st">"plotly_click"</span>) <span class="co">#&lt;&lt;</span></span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a>    })    </span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<hr>
</section>
<section id="in-class-exercise-embedding-a-drill-down-bar-chart-in-shiny-revised-version" class="level3">
<h3 class="anchored" data-anchor-id="in-class-exercise-embedding-a-drill-down-bar-chart-in-shiny-revised-version">In-class Exercise: Embedding a drill-down bar chart in Shiny (Revised version)</h3>
<div class="columns">
<div class="column" style="width:50%;">
<p>The ui:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plotly)</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>exam <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/Exam_data.csv"</span>)</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">titlePanel</span>(<span class="st">"Drill-down Bar Chart"</span>),</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mainPanel</span>(</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>            <span class="fu">plotlyOutput</span>(<span class="st">"race"</span>),</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>            <span class="fu">plotlyOutput</span>(<span class="st">"gender"</span>),</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>            <span class="fu">verbatimTextOutput</span>(<span class="st">"info"</span>)</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<p>The server:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output) {</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>    output<span class="sc">$</span>race <span class="ot">&lt;-</span> <span class="fu">renderPlotly</span>({</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>        p <span class="ot">&lt;-</span> exam <span class="sc">%&gt;%</span> <span class="co">#&lt;&lt;</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>            <span class="fu">plot_ly</span>(<span class="at">x =</span> <span class="sc">~</span>RACE) <span class="co">#&lt;&lt;</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>    output<span class="sc">$</span>gender <span class="ot">&lt;-</span> <span class="fu">renderPlotly</span>({</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>        d <span class="ot">&lt;-</span> <span class="fu">event_data</span>(<span class="st">"plotly_click"</span>)</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (<span class="fu">is.null</span>(d)) <span class="fu">return</span>(<span class="cn">NULL</span>)</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>        p <span class="ot">&lt;-</span> exam <span class="sc">%&gt;%</span> </span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>            <span class="fu">filter</span>(RACE <span class="sc">%in%</span> d<span class="sc">$</span>x) <span class="sc">%&gt;%</span> </span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>            <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>GENDER)) <span class="sc">+</span></span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>            <span class="fu">geom_bar</span>() </span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>        <span class="fu">ggplotly</span>(p) <span class="sc">%&gt;%</span></span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>            <span class="fu">layout</span>(<span class="at">xaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> d<span class="sc">$</span>x))</span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a>    output<span class="sc">$</span>info <span class="ot">&lt;-</span> <span class="fu">renderPrint</span>({</span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a>        <span class="fu">event_data</span>(<span class="st">"plotly_click"</span>)</span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a>    })    </span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="in-class-exercise-embedding-a-static-map-in-shiny" class="level2">
<h2 class="anchored" data-anchor-id="in-class-exercise-embedding-a-static-map-in-shiny">In-class Exercise: Embedding A Static Map in Shiny</h2>
<p>In this exercise, you will learn how to embed a static map in Shiny by using <em>renderPlot()</em>. By the end of this exercise, you will be able to plot a static map on Shiny display as shown below.</p>
<p><img src="img/image23.jpg" class="img-fluid"></p>
<hr>
<section id="in-class-exercise-embedding-a-static-map-in-shiny-1" class="level3">
<h3 class="anchored" data-anchor-id="in-class-exercise-embedding-a-static-map-in-shiny-1">In-class Exercise: Embedding A Static Map in Shiny</h3>
<div class="columns">
<div class="column" style="width:50%;">
<section id="setting-up" class="level4">
<h4 class="anchored" data-anchor-id="setting-up">Setting up</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tmap)</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</div><div class="column" style="width:50%;">
<section id="importing-the-geospatial-data" class="level4">
<h4 class="anchored" data-anchor-id="importing-the-geospatial-data">Importing the geospatial data</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>mpsz <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="at">dsn =</span> <span class="st">"data/geospatial"</span>, </span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>                <span class="at">layer =</span> <span class="st">"MP14_SUBZONE_WEB_PL"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</div>
</div>
<hr>
</section>
<section id="in-class-exercise-embedding-a-static-map-in-shiny-2" class="level3">
<h3 class="anchored" data-anchor-id="in-class-exercise-embedding-a-static-map-in-shiny-2">In-class Exercise: Embedding a static map in Shiny</h3>
<p>The UI codes</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">titlePanel</span>(<span class="st">"A simple map display"</span>),</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sidebarLayout</span>(</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>        <span class="fu">sidebarPanel</span>(</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>            <span class="fu">checkboxInput</span>(<span class="at">inputId =</span> <span class="st">"show_data"</span>,</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>                          <span class="at">label =</span> <span class="st">"Show data table"</span>,</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>                          <span class="at">value =</span> <span class="cn">TRUE</span>)</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>        <span class="fu">mainPanel</span>(</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>            <span class="fu">plotOutput</span>(<span class="st">"mapPlot"</span>),</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>            DT<span class="sc">::</span><span class="fu">dataTableOutput</span>(<span class="at">outputId =</span> <span class="st">"szTable"</span>)</span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
</section>
<section id="in-class-exercise-embedding-a-static-map-in-shiny-3" class="level3">
<h3 class="anchored" data-anchor-id="in-class-exercise-embedding-a-static-map-in-shiny-3">In-class Exercise: Embedding a static map in Shiny</h3>
<p>The Server codes:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output){</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>    output<span class="sc">$</span>mapPlot <span class="ot">&lt;-</span> <span class="fu">renderPlot</span>({</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_shape</span>(mpsz)<span class="sc">+</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>            <span class="fu">tm_fill</span>() <span class="sc">+</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>            <span class="fu">tm_borders</span>(<span class="at">lwd =</span> <span class="fl">0.1</span>,  <span class="at">alpha =</span> <span class="dv">1</span>)</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>    output<span class="sc">$</span>szTable <span class="ot">&lt;-</span> DT<span class="sc">::</span><span class="fu">renderDataTable</span>({</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span>(input<span class="sc">$</span>show_data){</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>            DT<span class="sc">::</span><span class="fu">datatable</span>(<span class="at">data =</span> mpsz <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">7</span>),</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>                          <span class="at">options=</span> <span class="fu">list</span>(<span class="at">pageLength =</span> <span class="dv">10</span>),</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>                          <span class="at">rownames =</span> <span class="cn">FALSE</span>)</span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>    })    </span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout-important callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>Important, don’t miss out this line</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyApp</span> (<span class="at">ui=</span>ui, <span class="at">server=</span>server)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="in-class-exercise-building-a-choropleth-mapping-application" class="level2">
<h2 class="anchored" data-anchor-id="in-class-exercise-building-a-choropleth-mapping-application">In-class Exercise: Building a choropleth mapping application</h2>
<p>In this exercise, you will learn how to build a choropleth mapping application by using tmap and Shiny.</p>
<p><img src="img/image24.jpg" class="img-fluid"></p>
<hr>
<section id="in-class-exercise-building-a-choropleth-mapping-application-1" class="level3">
<h3 class="anchored" data-anchor-id="in-class-exercise-building-a-choropleth-mapping-application-1">In-class Exercise: Building a choropleth mapping application</h3>
<p>Edit the code as shown below:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tmap)</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>mpsz <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="at">dsn =</span> <span class="st">"data/geospatial"</span>, </span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>                <span class="at">layer =</span> <span class="st">"MP14_SUBZONE_WEB_PL"</span>)</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>popagsex <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/aspatial/respopagsex2000to2018.csv"</span>) <span class="co">#&lt;&lt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
</section>
<section id="in-class-exercise-building-a-choropleth-mapping-application-2" class="level3">
<h3 class="anchored" data-anchor-id="in-class-exercise-building-a-choropleth-mapping-application-2">In-class Exercise: Building a choropleth mapping application</h3>
<p>Edit the codes as shown below:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>popagsex2018_male <span class="ot">&lt;-</span> popagsex <span class="sc">%&gt;%</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(Sex <span class="sc">==</span> <span class="st">"Males"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(Time <span class="sc">==</span> <span class="dv">2018</span>) <span class="sc">%&gt;%</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">spread</span>(AG, Pop) <span class="sc">%&gt;%</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">YOUNG =</span> <span class="st">`</span><span class="at">0_to_4</span><span class="st">`</span><span class="sc">+</span><span class="st">`</span><span class="at">5_to_9</span><span class="st">`</span><span class="sc">+</span><span class="st">`</span><span class="at">10_to_14</span><span class="st">`</span><span class="sc">+</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>               <span class="st">`</span><span class="at">15_to_19</span><span class="st">`</span><span class="sc">+</span><span class="st">`</span><span class="at">20_to_24</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="st">`</span><span class="at">ECONOMY ACTIVE</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">rowSums</span>(.[<span class="dv">9</span><span class="sc">:</span><span class="dv">13</span>])<span class="sc">+</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>               <span class="fu">rowSums</span>(.[<span class="dv">15</span><span class="sc">:</span><span class="dv">17</span>]))<span class="sc">%&gt;%</span></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="st">`</span><span class="at">AGED</span><span class="st">`</span><span class="ot">=</span><span class="fu">rowSums</span>(.[<span class="dv">18</span><span class="sc">:</span><span class="dv">22</span>])) <span class="sc">%&gt;%</span></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="st">`</span><span class="at">TOTAL</span><span class="st">`</span><span class="ot">=</span><span class="fu">rowSums</span>(.[<span class="dv">5</span><span class="sc">:</span><span class="dv">22</span>])) <span class="sc">%&gt;%</span>  </span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="st">`</span><span class="at">DEPENDENCY</span><span class="st">`</span> <span class="ot">=</span> (<span class="st">`</span><span class="at">YOUNG</span><span class="st">`</span> <span class="sc">+</span> <span class="st">`</span><span class="at">AGED</span><span class="st">`</span>)</span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>           <span class="sc">/</span><span class="st">`</span><span class="at">ECONOMY ACTIVE</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate_at</span>(<span class="at">.vars =</span> <span class="fu">vars</span>(PA, SZ), </span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>              <span class="at">.funs =</span> <span class="fu">funs</span>(toupper)) <span class="sc">%&gt;%</span></span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(<span class="st">`</span><span class="at">PA</span><span class="st">`</span>, <span class="st">`</span><span class="at">SZ</span><span class="st">`</span>, <span class="st">`</span><span class="at">YOUNG</span><span class="st">`</span>, </span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a>           <span class="st">`</span><span class="at">ECONOMY ACTIVE</span><span class="st">`</span>, <span class="st">`</span><span class="at">AGED</span><span class="st">`</span>, </span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>           <span class="st">`</span><span class="at">TOTAL</span><span class="st">`</span>, <span class="st">`</span><span class="at">DEPENDENCY</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="st">`</span><span class="at">ECONOMY ACTIVE</span><span class="st">`</span> <span class="sc">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a>mpsz_agemale2018 <span class="ot">&lt;-</span> <span class="fu">left_join</span>(mpsz,</span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a>                              popagsex2018_male,</span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true" tabindex="-1"></a>                              <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"SUBZONE_N"</span> <span class="ot">=</span> <span class="st">"SZ"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
</section>
<section id="in-class-exercise-building-a-choropleth-mapping-application-3" class="level3">
<h3 class="anchored" data-anchor-id="in-class-exercise-building-a-choropleth-mapping-application-3">In-class Exercise: Building a choropleth mapping application</h3>
<p>At the UI, edit the codes as shown below:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">titlePanel</span>(<span class="st">"Choropleth Mapping"</span>),</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sidebarLayout</span>(</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>        <span class="fu">sidebarPanel</span>(</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>            <span class="fu">selectInput</span>(<span class="at">inputId =</span> <span class="st">"classification"</span>,</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>                        <span class="at">label =</span> <span class="st">"Classification method:"</span>,</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>                        <span class="at">choices =</span> <span class="fu">list</span>(<span class="st">"fixed"</span> <span class="ot">=</span> <span class="st">"fixed"</span>, </span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"sd"</span> <span class="ot">=</span> <span class="st">"sd"</span>, </span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"equal"</span> <span class="ot">=</span> <span class="st">"equal"</span>, </span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"pretty"</span> <span class="ot">=</span> <span class="st">"pretty"</span>, </span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"quantile"</span> <span class="ot">=</span> <span class="st">"quantile"</span>, </span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"kmeans"</span> <span class="ot">=</span> <span class="st">"kmeans"</span>, </span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"hclust"</span> <span class="ot">=</span> <span class="st">"hclust"</span>, </span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"bclust"</span> <span class="ot">=</span> <span class="st">"bclust"</span>, </span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"fisher"</span> <span class="ot">=</span> <span class="st">"fisher"</span>, </span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"jenks"</span> <span class="ot">=</span> <span class="st">"jenks"</span>),</span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a>                        <span class="at">selected =</span> <span class="st">"pretty"</span>),</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
</section>
<section id="in-class-exercise-building-a-choropleth-mapping-application-4" class="level3">
<h3 class="anchored" data-anchor-id="in-class-exercise-building-a-choropleth-mapping-application-4">In-class Exercise: Building a choropleth mapping application</h3>
<p>At the UI, continue edit the codes as shown below:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>            <span class="fu">sliderInput</span>(<span class="at">inputId =</span> <span class="st">"classes"</span>,</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>                        <span class="at">label =</span> <span class="st">"Number of classes"</span>,</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>                        <span class="at">min =</span> <span class="dv">6</span>,</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>                        <span class="at">max =</span> <span class="dv">12</span>,</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>                        <span class="at">value =</span> <span class="fu">c</span>(<span class="dv">6</span>)),</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>            <span class="fu">selectInput</span>(<span class="at">inputId =</span> <span class="st">"colour"</span>,</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>                        <span class="at">label =</span> <span class="st">"Colour scheme:"</span>,</span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>                        <span class="at">choices =</span> <span class="fu">list</span>(<span class="st">"blues"</span> <span class="ot">=</span> <span class="st">"Blues"</span>, </span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"reds"</span> <span class="ot">=</span> <span class="st">"Reds"</span>, </span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"greens"</span> <span class="ot">=</span> <span class="st">"Greens"</span>,</span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"Yellow-Orange-Red"</span> <span class="ot">=</span> <span class="st">"YlOrRd"</span>,</span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"Yellow-Orange-Brown"</span> <span class="ot">=</span> <span class="st">"YlOrBr"</span>,</span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"Yellow-Green"</span> <span class="ot">=</span> <span class="st">"YlGn"</span>,</span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"Orange-Red"</span> <span class="ot">=</span> <span class="st">"OrRd"</span>),</span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a>                        <span class="at">selected =</span> <span class="st">"YlOrRd"</span>)</span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a>        <span class="er">)</span>,</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
</section>
<section id="in-class-exercise-building-a-choropleth-mapping-application-5" class="level3">
<h3 class="anchored" data-anchor-id="in-class-exercise-building-a-choropleth-mapping-application-5">In-class Exercise: Building a choropleth mapping application</h3>
<p>At the server, edit the codes as shown below:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output){</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>    output<span class="sc">$</span>mapPlot <span class="ot">&lt;-</span> <span class="fu">renderPlot</span>({</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_shape</span>(mpsz_agemale2018)<span class="sc">+</span> <span class="co">#&lt;&lt;</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>            <span class="fu">tm_fill</span>(<span class="st">"DEPENDENCY"</span>,  <span class="co">#&lt;&lt;</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>                    <span class="at">n =</span> input<span class="sc">$</span>classes, <span class="co">#&lt;&lt;</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>                    <span class="at">style =</span> input<span class="sc">$</span>classification, <span class="co">#&lt;&lt;</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>                    <span class="at">palette =</span> input<span class="sc">$</span>colour) <span class="sc">+</span> <span class="co">#&lt;&lt;</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>            <span class="fu">tm_borders</span>(<span class="at">lwd =</span> <span class="fl">0.1</span>,</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>                       <span class="at">alpha =</span> <span class="dv">1</span>)</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>        })</span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout-important callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>A gentle reminder,</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyApp</span> (<span class="at">ui=</span>ui, <span class="at">server=</span>server)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="embedding-an-interactive-map-in-shiny" class="level2">
<h2 class="anchored" data-anchor-id="embedding-an-interactive-map-in-shiny">Embedding an interactive map in Shiny</h2>
<p>In this exercise, you will learn how to embed an interactive map in Shiny by using <code>renderTmap()</code> and <code>tmapOutput()</code> of <strong>tmap</strong> package. The interactive map is a proportional symbol map showing distribution of winnings by branches/outlets.</p>
<p><img src="img/image25.jpg" class="img-fluid"></p>
<hr>
<section id="setting-up-1" class="level3">
<h3 class="anchored" data-anchor-id="setting-up-1">Setting up</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tmap)</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="importing-the-geospatial-data-1" class="level3">
<h3 class="anchored" data-anchor-id="importing-the-geospatial-data-1">Importing the geospatial data</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>sgpools <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/aspatial/SGPools_svy21.csv"</span>)</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>sgpools_sf <span class="ot">&lt;-</span> <span class="fu">st_as_sf</span>(sgpools, </span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>                       <span class="at">coords =</span> <span class="fu">c</span>(<span class="st">"XCOORD"</span>, </span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>                                  <span class="st">"YCOORD"</span>),</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>                       <span class="at">crs=</span> <span class="dv">3414</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="things-to-learn-from-the-code-chunk-above" class="level3 {callout-note}">
<h3 class="anchored" data-anchor-id="things-to-learn-from-the-code-chunk-above">Things to learn from the code chunk above:</h3>
<ul>
<li><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html"><code>st_as_sf()</code></a> of sf package is used to convert the tibble data frame into simple feature data frame by using values from the XCOORD and YCOORD fields. The crs argument is used to specify the projected coordinates systems (i.e.&nbsp;svy21 for Singapore).</li>
</ul>
</section>
<hr>
<section id="the-ui-1" class="level3">
<h3 class="anchored" data-anchor-id="the-ui-1">The ui</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">titlePanel</span>(<span class="st">"Interactive Map View"</span>),</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sidebarLayout</span>(</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>        <span class="fu">sidebarPanel</span>(</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>            <span class="fu">checkboxInput</span>(<span class="at">inputId =</span> <span class="st">"showData"</span>,</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>                          <span class="at">label =</span> <span class="st">"Show data table"</span>,</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>                          <span class="at">value =</span> <span class="cn">TRUE</span>)</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>        <span class="fu">mainPanel</span>(</span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>            <span class="fu">tmapOutput</span>(<span class="st">"mapPlot"</span>), <span class="co">#&lt;&lt;</span></span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>            DT<span class="sc">::</span><span class="fu">dataTableOutput</span>(<span class="at">outputId =</span> <span class="st">"aTable"</span>)</span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Notice that <code>tmapout()</code> is used instead of <code>plotOutput()</code>.</p>
</div>
</div>
<hr>
</section>
<section id="the-server-1" class="level3">
<h3 class="anchored" data-anchor-id="the-server-1">The server</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session){</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>    output<span class="sc">$</span>mapPlot <span class="ot">&lt;-</span> <span class="fu">renderTmap</span>({   <span class="co">#&lt;&lt;</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_shape</span>(sgpools_sf)<span class="sc">+</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>            <span class="fu">tm_bubbles</span>(<span class="at">col =</span> <span class="st">"OUTLET TYPE"</span>,</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>                       <span class="at">size =</span> <span class="st">"Gp1Gp2 Winnings"</span>,</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>                       <span class="at">border.col =</span> <span class="st">"black"</span>,</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>                       <span class="at">border.lwd =</span> <span class="fl">0.5</span>)</span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>    output<span class="sc">$</span>aTable <span class="ot">&lt;-</span> DT<span class="sc">::</span><span class="fu">renderDataTable</span>({</span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span>(input<span class="sc">$</span>showData){</span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a>            DT<span class="sc">::</span><span class="fu">datatable</span>(<span class="at">data =</span> sgpools_sf <span class="sc">%&gt;%</span> </span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a>                            <span class="fu">select</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>),</span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a>                          <span class="at">options=</span> <span class="fu">list</span>(<span class="at">pageLength =</span> <span class="dv">10</span>),</span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a>                          <span class="at">rownames =</span> <span class="cn">FALSE</span>)</span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb31-17"><a href="#cb31-17" aria-hidden="true" tabindex="-1"></a>    })    </span>
<span id="cb31-18"><a href="#cb31-18" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Notice that <a href="https://rdrr.io/cran/tmap/man/renderTmap.html"><code>renderTmap()</code></a> is used instead of <code>renderPlot()</code>.</p>
</div>
</div>
</section>
</section>
<section id="in-class-exercise-reactive-map-in-r-shiny" class="level2">
<h2 class="anchored" data-anchor-id="in-class-exercise-reactive-map-in-r-shiny">In-class Exercise: Reactive Map in R Shiny</h2>
<p>In this exercise, you will learn how to create reactive map in Shiny. The output will look similar to the figure below.</p>
<p><img src="img/image26.jpg" class="img-fluid"></p>
<hr>
<section id="the-ui-2" class="level3">
<h3 class="anchored" data-anchor-id="the-ui-2">The ui</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">titlePanel</span>(<span class="st">"Reactive Map"</span>),</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sidebarLayout</span>(</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>        <span class="fu">sidebarPanel</span>(</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>            <span class="fu">selectInput</span>(<span class="at">inputId =</span> <span class="st">"type"</span>,</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>                        <span class="at">label =</span> <span class="st">"Branch or Outlet?"</span>,</span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>                        <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">"branch"</span> <span class="ot">=</span> <span class="st">"Branch"</span>,</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>                                    <span class="st">"outlet"</span> <span class="ot">=</span> <span class="st">"Outlet"</span>),</span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>                        <span class="at">selected =</span> <span class="st">"Branch"</span>,</span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>                        <span class="at">multiple =</span> <span class="cn">TRUE</span>),</span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>            <span class="fu">sliderInput</span>(<span class="at">inputId =</span> <span class="st">"winning"</span>, </span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a>                        <span class="at">label =</span> <span class="st">"Number of winnings"</span>, </span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a>                        <span class="at">min =</span> <span class="dv">2</span>,</span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a>                        <span class="at">max =</span> <span class="dv">80</span>, </span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a>                        <span class="at">value =</span> <span class="dv">20</span>),</span>
<span id="cb32-16"><a href="#cb32-16" aria-hidden="true" tabindex="-1"></a>            <span class="fu">checkboxInput</span>(<span class="at">inputId =</span> <span class="st">"showData"</span>,</span>
<span id="cb32-17"><a href="#cb32-17" aria-hidden="true" tabindex="-1"></a>                          <span class="at">label =</span> <span class="st">"Show data table"</span>,</span>
<span id="cb32-18"><a href="#cb32-18" aria-hidden="true" tabindex="-1"></a>                          <span class="at">value =</span> <span class="cn">TRUE</span>)</span>
<span id="cb32-19"><a href="#cb32-19" aria-hidden="true" tabindex="-1"></a>        ),</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
</section>
<section id="the-ui-continue" class="level3">
<h3 class="anchored" data-anchor-id="the-ui-continue">The ui (continue)</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>        <span class="fu">mainPanel</span>(</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>            <span class="fu">tmapOutput</span>(<span class="st">"mapPlot"</span>),</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>            DT<span class="sc">::</span><span class="fu">dataTableOutput</span>(<span class="at">outputId =</span> <span class="st">"aTable"</span>)</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>    <span class="er">)</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a><span class="er">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
</section>
<section id="the-server-2" class="level3">
<h3 class="anchored" data-anchor-id="the-server-2">The server</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session){</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>    dataset <span class="ot">=</span> <span class="fu">reactive</span>({ <span class="co">#&lt;&lt;                   </span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>        sgpools_sf <span class="sc">%&gt;%</span> <span class="co">#&lt;&lt;</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>            <span class="fu">filter</span>(TYPE <span class="sc">==</span> input<span class="sc">$</span>type) <span class="sc">%&gt;%</span> <span class="co">#&lt;&lt;</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>            <span class="fu">filter</span>(WINNINGS <span class="sc">&gt;</span> input<span class="sc">$</span>winning) <span class="co">#&lt;&lt;</span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>    output<span class="sc">$</span>mapPlot <span class="ot">&lt;-</span> <span class="fu">renderTmap</span>({</span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_shape</span>(<span class="at">shp =</span> <span class="fu">dataset</span>(), <span class="co">#&lt;&lt;</span></span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a>                 <span class="at">bbox =</span> <span class="fu">st_bbox</span>(sgpools_sf))<span class="sc">+</span> <span class="co">#&lt;&lt;</span></span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a>            <span class="fu">tm_bubbles</span>(<span class="at">col =</span> <span class="st">"TYPE"</span>,</span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a>                       <span class="at">size =</span> <span class="st">"WINNINGS"</span>,</span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a>                       <span class="at">border.col =</span> <span class="st">"black"</span>,</span>
<span id="cb34-14"><a href="#cb34-14" aria-hidden="true" tabindex="-1"></a>                       <span class="at">border.lwd =</span> <span class="fl">0.5</span>)</span>
<span id="cb34-15"><a href="#cb34-15" aria-hidden="true" tabindex="-1"></a>    })</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Things to learn from the code chunk above:
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><a href="https://shiny.rstudio.com/reference/shiny/1.6.0/reactive.html"><code>reactive()</code></a> is used to create a reactive expression (i.e.&nbsp;dataset) that hold the extracted data set.</li>
<li><em>bbox = <code>st_bbox()</code></em> argument is used to fix the extend of the map view.</li>
</ul>
</div>
</div>
<hr>
</section>
<section id="the-server-continue" class="level3">
<h3 class="anchored" data-anchor-id="the-server-continue">The server (continue)</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>    output<span class="sc">$</span>aTable <span class="ot">&lt;-</span> DT<span class="sc">::</span><span class="fu">renderDataTable</span>({</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span>(input<span class="sc">$</span>showData){</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>            DT<span class="sc">::</span><span class="fu">datatable</span>(<span class="at">data =</span> <span class="fu">dataset</span>() <span class="sc">%&gt;%</span> <span class="co">#&lt;&lt;</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>                              <span class="fu">select</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>),</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>                          <span class="at">options=</span> <span class="fu">list</span>(<span class="at">pageLength =</span> <span class="dv">10</span>),</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>                          <span class="at">rownames =</span> <span class="cn">FALSE</span>)</span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>    })    </span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a><span class="er">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout-important callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>Also, don’t forget this magic line!</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyApp</span> (<span class="at">ui=</span>ui, <span class="at">server=</span>server)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="references" class="level2">
<h2 class="anchored" data-anchor-id="references">References</h2>
<ul>
<li>Hadley Wickham (2020) <strong>Mastering Shiny: Build Interactive Apps, Reports, and Dashboards Powered by R</strong> online version
<ul>
<li><a href="https://mastering-shiny.org/basic-reactivity.html">Chapter 3 Basic reactivity</a></li>
<li><a href="https://mastering-shiny.org/reactive-motivation.html">Chapter 13 Why reactivity?</a></li>
<li><a href="https://mastering-shiny.org/reactive-graph.html">Chapter 14 The reactive graph</a></li>
<li><a href="https://mastering-shiny.org/reactivity-objects.html">Chapter 15 Reactive building blocks</a></li>
<li><a href="https://mastering-shiny.org/reactivity-components.html">Chapter 16 Escaping the graph</a></li>
</ul></li>
<li>Carson Sievert (2019) <strong>Interactive web-based data visualization with R, plotly, and shiny</strong>, online version.
<ul>
<li><a href="https://plotly-r.com/linking-views-with-shiny.html">Chapter 17 Server-side linking with shiny</a></li>
</ul></li>
</ul>
<div class="cell">

</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>